---
layout: post
title: "HTTP网络请求"
excerpt: "《Android开发进阶：从小工到专家》第4章读书笔记"
tags: [读书笔记，从小工到专家]
comments: true
---

# 1、HTTP网络请求原理 #

对移动开发来说，网络应用基本都是C/S架构。客户端通过向服务器发起特定请求，服务器返回结果，客户端解析结果，再将结果显示在UI上。

客户端服务端交互流程：

* 客户端执行网络请求，从URL中解析出服务器的主机名
* 将服务器的主机名转换成服务器的IP地址
* 将端口号从URL中解析出来
* 建立一条客户端与Web服务器的TCP连接
* 客户端通过输出流想服务器发送一条HTTP请求
* 服务器向客户端回送一条HTTP相应报文
* 客户端从输入流获取报文
* 客户端解析报文，关闭连接
* 客户端将结果显示在UI上

## 1.1、HTTP的请求方式 ##

* GET,获取服务器中的某个资源（最常用）。GET请求的参数都需要放到请求的URL中，第一个参数前有“？”，参数格式为：参数名=参数值，参数之间用&相连。
* POST，起初用来向服务器传送数据。通常会用来提交HTML的表单。也能实现GET的功能，区别是参数不放到URL中，而是请求体中
* PUT，与GET相反，向服务器写入资源
* DELETE，请服务器删除请求URL所指定的资源

## 1.2、HTTP报文格式解析

不同的请求方式，请求格式也不同。请求格式就是我们所说的报文格式。通常，一个HTTP请求报文由请求行、请求头部、空行和请求数据4个部分组成。

HTTP响应报文也由3个部分组成，分别是：状态行、消息报头、响应正文。

## 2、Android中执行网络请求 ##

两种执行网络请求方式：Apache的HttpClient和Java的HttpURLConnection。、

Android2.2之前，HttpClient的Bug较少，而HttpURLConnection的Bug较多。在Android2.3之后，
HttpURLConnection是最佳选择，API简单、体积小是它的优点，其压缩和缓存机制可以有效减少流量消耗。在Android6.0中，HttpClient库已经被移除。

在开发过程中，网络模块是最基础的一部分。流行网络框架有Volley、OkHttp等。


